{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/gallery-randomizer.js","../src/main.js"],"sourcesContent":["export const createMarkup = images => {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"title\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`\n    )\n    .join('');\n};\n","import axios from 'axios';\n\nconst API_KEY = '49342840-003e2c292237fbf09de0074d9';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getPictures(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response?.data?.message || 'Failed to fetch images');\n  }\n}\n","function randomizeGalleryItems() {\n  const galleryItems = document.querySelectorAll('.gallery-item');\n\n  galleryItems.forEach(item => {\n    item.style.width = '';\n\n    const randomWidth = Math.floor(Math.random() * (450 - 275 + 1)) + 275;\n    item.style.width = `${randomWidth}px`;\n  });\n}\n\nexport { randomizeGalleryItems };\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { createMarkup } from './js/render-functions';\nimport { getPictures } from './js/pixabay-api';\nimport { randomizeGalleryItems } from './js/gallery-randomizer';\n\nconst formSearch = document.querySelector('.form');\nconst listImages = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn2');\n\nlet page = 1;\nlet query = '';\nconst perPage = 15;\nlet isScrolling = false;\n\nloader.style.display = 'none';\nbtnLoadMore.classList.add('is-hidden');\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction updateGradient(hasImages) {\n  const timestamp = Date.now(); // Уникальная метка времени\n  const gradient = hasImages\n    ? `linear-gradient(rgba(46, 47, 66, 0.8), rgba(46, 47, 66, 0.8))`\n    : `linear-gradient(rgba(46, 47, 66, 0.3), rgba(46, 47, 66, 0.3))`;\n  document.body.style.background = `${gradient}, url(\"/goit-js-hw-12/img/1.webp?t=${timestamp}\") fixed no-repeat`;\n  document.body.style.backgroundSize = 'cover';\n}\n\nfunction scrollByTwoRows() {\n  const firstItem = document.querySelector('.gallery-item');\n  if (firstItem && !isScrolling) {\n    const itemHeight = firstItem.getBoundingClientRect().height;\n    isScrolling = true;\n    window.scrollBy({\n      top: 2 * itemHeight,\n      behavior: 'smooth',\n    });\n\n    setTimeout(() => {\n      isScrolling = false;\n    }, 500);\n  }\n}\n\nasync function onSearch(event) {\n  event.preventDefault();\n  listImages.innerHTML = '';\n  showLoader();\n  btnLoadMore.classList.add('is-hidden');\n\n  query = event.target.elements['search-text'].value.trim();\n  page = 1;\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Input cannot be empty!',\n      color: '#ff0000',\n    });\n    hideLoader();\n    return;\n  }\n\n  try {\n    const data = await getPictures(query, page);\n    hideLoader();\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      updateGradient(false);\n      return;\n    }\n\n    listImages.innerHTML = createMarkup(data.hits);\n    randomizeGalleryItems();\n    updateGradient(true);\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n\n    if (data.totalHits > page * perPage) {\n      btnLoadMore.classList.remove('is-hidden');\n    }\n\n    formSearch.reset();\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ title: 'Error', message: error.message });\n    updateGradient(false);\n  }\n}\n\nasync function onLoadMore(event) {\n  showLoader();\n  page++;\n\n  try {\n    const data = await getPictures(query, page);\n    hideLoader();\n\n    if (!data.hits.length || data.hits.length < perPage) {\n      btnLoadMore.classList.add('is-hidden');\n      btnLoadMore.removeEventListener('click', onLoadMore);\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    listImages.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    randomizeGalleryItems();\n    updateGradient(true);\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ title: 'Error', message: error.message });\n    updateGradient(false);\n  }\n}\n\nwindow.addEventListener('wheel', event => {\n  if (event.deltaY > 0) {\n    scrollByTwoRows();\n  }\n});\n\nformSearch.addEventListener('submit', onSearch);\nbtnLoadMore.addEventListener('click', onLoadMore);\n"],"names":["createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","BASE_URL","getPictures","query","page","axios","error","_b","_a","randomizeGalleryItems","item","randomWidth","formSearch","listImages","loader","btnLoadMore","perPage","isScrolling","showLoader","hideLoader","updateGradient","hasImages","timestamp","gradient","scrollByTwoRows","firstItem","itemHeight","onSearch","event","iziToast","data","SimpleLightbox","onLoadMore"],"mappings":"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"}